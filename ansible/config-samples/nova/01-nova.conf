[DEFAULT]
state_path = /var/lib/nova
allow_resize_to_same_host = true

# enable log rotation in oslo config by default
max_logfile_count=5
max_logfile_size_mb=50
log_rotation_type=size
log_file = /var/log/containers/nova/nova-compute.log
debug=true
# ensure safe defaults for new hosts
initial_cpu_allocation_ratio=4.0
initial_ram_allocation_ratio=1.0
initial_disk_allocation_ratio=0.9
# use predictable instnace names for simpler debuging.
instance_name_template="instance-%(uuid)s"
force_config_drive=True
# yes i know this is a real password but its for a temporay dev env so its fine to include this.
# this file will be generated by the go operator later.
transport_url = rabbit://default_user_VPe0WObxmJCkA-XPoHM:-e8njQIWgf-9lwSWAcsEUCf8x5sAkLue@rabbitmq-cell1.openstack.svc:5672
compute_driver=libvirt.LibvirtDriver
[oslo_concurrency]
lock_path = /var/lib/nova/tmp

[oslo_messaging_rabbit]
amqp_durable_queues=false
amqp_auto_delete=false
# we should consider using quorum queues instead
# rabbit_quorum_queue=true
heartbeat_in_pthread=false

[upgrade_levels]
compute = auto

[oslo_messaging_notifications]
driver = noop

[cache]
# always enable caching
enabled = True
# on compute nodes or where memcache is not deployed we should use an in memory
# dict cache
backend = oslo_cache.dict

[workarounds]
disable_fallback_pcpu_query=true
enable_qemu_monitor_announce_self=true
reserve_disk_resource_for_image_cache=true

# never_download_image_if_on_rbd=true
# disable_group_policy_check_upcall=true
# wait_for_vif_plugged_event_during_hard_reboot=["normal"]
# we might want to enable these for upgrades.
# disable_compute_service_check_for_ffu=true
# skip_cpu_compare_on_dest=true
# skip_hypervisor_version_check_on_lm=true

[libvirt]
live_migration_permit_post_copy=true
live_migration_permit_auto_converge=true
live_migration_timeout_action=force_complete
cpu_mode=host-model
hw_machine_type=x86_64=q35
sysinfo_serial=unique
mem_stats_period_seconds=0
num_pcie_ports=24
images_type=qcow2
hw_disk_discard=unmap
rx_queue_size=512
tx_queue_size=512
swtpm_enabled=True

[keystone_authtoken]
www_authenticate_uri = http://keystone-public-openstack.apps.oks-dev.seanmooney.info
auth_url =  http://keystone-public-openstack.apps.oks-dev.seanmooney.info
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = nova
password = 12345678
cafile =
region_name = regionOne

[placement]
auth_url =  http://keystone-public-openstack.apps.oks-dev.seanmooney.info
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = nova
password = 12345678
cafile =
region_name = regionOne
valid_interfaces = internal

[glance]
auth_url = http://keystone-public-openstack.apps.oks-dev.seanmooney.info
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = nova
password = 12345678
cafile =
region_name = regionOne
valid_interfaces = internal

[neutron]
auth_url = http://keystone-public-openstack.apps.oks-dev.seanmooney.info
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = nova
password = 12345678
cafile =
region_name = regionOne
valid_interfaces = internal
metadata_proxy_shared_secret = 42
service_metadata_proxy = true
